<html>
<head>
    <title>Дополнительный материал по подкреплениям</title>
    <meta charset='utf-8'>
    <link rel='stylesheet' type='text/css' href='../style.css'>
    <link rel="icon" href="../images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="../images/favicon.ico" type="image/x-icon">
</head>
<body>
<h1>Дополнительный материал по подкреплениям</h1>
<script src="../js/header_href.js"></script>
<h2 name="reinf_menu">Меню подкреплений</h2>
<p>
    Иногда подкреплений настолько много, что поместить их одновременно на одном экране не представляется возможным. Я
    уже не говорю про малые мониторы, которые и так не много показывают.<br/>
    С связи с этим придумали меню подкреплений. Проще разбить их по папкам по неким признакам. Так это делается в
    сетевой игре и тут я покажу как это сделать с одиночной миссии.<br/><br/>

    <a href='reinforcements.html'>Прежде</a> Вы ознакомились с тем, как создавать простое подкрепление, так что сюда мы
    углубляться не будем. Я просто скажу, что оно будет базовым элементом в нашем меню.<br/><br/>

    Итак, общая идея такова: элементы меню - это те же подкрепления, однако они не вызывают юнитов, а открывают доступ к
    другим подкреплениям.<br/><br/>

    Открываем <b>F9 -> reinforcements</b> и там создаём набор подкреплений: '1-humans', '2-vehicles', '3-cannons',
    '4-tanks' и '5-support'. Заполняем необходимые поля.<br/>
    <img src='../images/mission_prop/reinf_adv_1.jpg'/><br/><br/>

    Далее создаем ещё ряд подкреплений: '4.1-tanks_light', '4.2-tanks_medium', '4.3-tanks_heavy' и '4.4-tanks_sau'.
    Заполяем необходимые поля. Эти подкрепления будут служить как подменю для танков, т.к. их мы разобьём на группы:
    лёгкие, средние, тяжёлые и САУ соответственно.<br/>
    <img src='../images/mission_prop/reinf_adv_2.jpg'/><br/><br/>

    Создайте подкрепление для возврата в предыдущее меню (например, назовём его '0-back'). Для подменю танков создадим
    такое же с именем '0-back_tanks'.<br/>
    <img src='../images/mission_prop/reinf_adv_3.jpg'/><br/><br/>

    Далее организуем переход между основным меню и подменю танков.<br/>
    При переходе нужно реализовать две вещи: скрыть основное меню и показать подменю. Для первого шага, посколько оно
    будет использоваться несколько раз при создании меню для пехоты, орудий и, собственно, танков - создами функцию,
    чтобы можно было вызвать её одной командой.<br/>
    Эта функция ('transition-main') скрывает все подкрепления основного меню (operation = hide).<br/>
    <img src='../images/mission_prop/reinf_adv_4.jpg'/><br/><br/>

    Второй шаг - открыть новый список с нужными подкреплениями.<br/>
    Для этого нужно создать несколько команд, которые покажут нужные подкрепления. В данном случае нам нужно показать
    подменю для танков. Триггер выглядит следующим образом: в условии стоит событие, которое стояло в главном меню на
    танках. В командах:
<ul>
    <li>call - вызывает фукнцию 'transition-main'</li>
    <li>reinforcement - делает доступным подменю лёгких танков</li>
    <li>reinforcement - делает доступным подменю средних танков</li>
    <li>reinforcement - делает доступным подменю тяжёлых танков</li>
    <li>reinforcement - делает доступным подменю САУ</li>
    <li>reinforcement - делает доступной кнопку возврата на главное меню</li>
    <li>event - сбрасывает событие, что стояло в условии, чтобы это подменю можно было открыть повторно</li>
</ul>
На изображении показано, как это выглядит в редакторе.<br/>
<img src='../images/mission_prop/reinf_adv_5.jpg'/><br/><br/>

Теперь нужно организовать вызов подменю отдельных юнитов.<br/>

Идея остаётся такая же как и в вызове подменю для танков: сначала скрываем главное меню, потом показываем новые
подкрепления.<br/>
Например, триггер 'reinf/humans/show' выглядит следующим образом:<br/>
<img src='../images/mission_prop/reinf_adv_6.jpg'/><br/>
В условии - событие, которое указали в F9 -> reinforcements для пехоты. В командах: функция, которая скрывает основное
меню подкреплений, потом ряд подкреплений для пехоты, который необходимо отобразить, после него - кнопка назад и сброс
события.<br/><br/>

Для танков одна разница - функция, которая вызывается в начале скрывает не главное меню подкреплений, а подменю танков
('transition-tanks').<br/>
<img src='../images/mission_prop/reinf_adv_7.jpg'/><br/><br/>

Итак, общая структура подкреплений выглядит так:<br/>
    <pre>
        1-humans
            1.1-rifle
            1.2-smg
            1.3-sniper
            1.4-assaultman
            1.5-special
            0-back
        2-vehicles
            2.1-zis5_ammo
            2.2-ba64
            2.3-ba11
            0-back
        3-cannons
            3.1-mgun
            3.2-zis3
            3.3-k61
            3.4-d1
            0-back
        4-tanks
            4.1-tanks_light
                4.1.1-bt7a
                4.1.2-t26
                4.1.3-t70
                4.1.4-zis30
                4.1.5-zsu37
                0-back_tanks
            4.2-tanks_medium
                4.2.1-t3457
                4.2.2-t3476
                4.2.3-t3476a
                4.2.4-t3485
                4.2.5-su122
                0-back_tanks
            4.3-tanks_heavy
                4.3.1-kv1
                4.3.2-kv85
                4.3.3-is1
                4.3.4-is2
                4.3.5-is3
                4.3.6-kv2
                0-back_tanks
            4.4-tanks_sau
                4.4.1-su76
                4.4.2-su85
                4.4.3-su100
                4.4.4-isu152
                0-back_tanks
            0-back
        5-support
            5.1-air_attack
            0-back
    </pre>
<br/>
Эта структура соблюдается как и в подкреплениях, так и в триггерах и событиях, для удобства.<br/>
<img src='../images/mission_prop/reinf_adv_8.jpg'/><br/><br/>

Вызов юнитов осуществляется на последних уровнях иерархии. Ниже приведён пример триггера ('reinf/humans/rifle'), который
вызывает подкрепление - стрелков ('1.1-rifle').<br/>
<img src='../images/mission_prop/reinf_adv_9.jpg'/><br/><br/>
</p>
<p>
    Готовый пример <a href="../.mi/0-simple_menu.mi">доступен по ссылке</a>. Переместите его в папку с любой картой
    (делался он на пустой карте) и откройте в редакторе. Это пример не доведён до конца - нет реализации всех
    подкреплений, но иерархия выдержана.
</p>

<h3>См. также</h3>
<li><a href='reinforcements.html'>Базовый мануал по подкреплениям</a></li>

<script src="../js/signature.js"></script>
</body>
</html>